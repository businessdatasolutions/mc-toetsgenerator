<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRD ‚Äî MC Toetsvalidatie & Generatie Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,300;0,8..60,400;0,8..60,600;0,8..60,700;1,8..60,400&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --ink: #1a1a2e;
    --ink-light: #3d3d5c;
    --ink-muted: #6b6b8a;
    --paper: #faf9f7;
    --paper-warm: #f5f3ef;
    --accent: #c44b2b;
    --accent-light: #e8d5cf;
    --accent-dark: #9a3520;
    --teal: #2b7a78;
    --teal-light: #d4edec;
    --gold: #b8860b;
    --gold-light: #f5ecd5;
    --border: #e2dfd8;
    --border-dark: #ccc8be;
    --shadow-sm: 0 1px 3px rgba(26,26,46,0.06);
    --shadow-md: 0 4px 16px rgba(26,26,46,0.08);
    --shadow-lg: 0 8px 32px rgba(26,26,46,0.12);
    --radius: 6px;
    --serif: 'Source Serif 4', Georgia, serif;
    --sans: 'DM Sans', -apple-system, sans-serif;
    --mono: 'JetBrains Mono', monospace;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: var(--sans);
    background: var(--paper);
    color: var(--ink);
    line-height: 1.7;
    font-size: 15px;
    -webkit-font-smoothing: antialiased;
  }

  /* ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ */
  .sidebar {
    position: fixed;
    top: 0; left: 0;
    width: 280px;
    height: 100vh;
    background: var(--ink);
    color: #fff;
    padding: 32px 0;
    overflow-y: auto;
    z-index: 100;
    transition: transform 0.3s ease;
  }

  .sidebar-header {
    padding: 0 24px 28px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    margin-bottom: 16px;
  }

  .sidebar-header .label {
    font-size: 10px;
    letter-spacing: 2.5px;
    text-transform: uppercase;
    color: var(--accent);
    font-weight: 600;
    margin-bottom: 8px;
  }

  .sidebar-header h1 {
    font-family: var(--serif);
    font-size: 18px;
    font-weight: 600;
    line-height: 1.3;
    color: #fff;
  }

  .sidebar-header .version {
    font-size: 11px;
    color: rgba(255,255,255,0.4);
    margin-top: 6px;
    font-family: var(--mono);
  }

  .nav-group {
    padding: 12px 0;
  }

  .nav-group-title {
    font-size: 9.5px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: rgba(255,255,255,0.3);
    padding: 0 24px;
    margin-bottom: 6px;
    font-weight: 600;
  }

  .nav-link {
    display: block;
    padding: 7px 24px 7px 28px;
    color: rgba(255,255,255,0.6);
    text-decoration: none;
    font-size: 13px;
    transition: all 0.15s;
    border-left: 2px solid transparent;
  }

  .nav-link:hover, .nav-link.active {
    color: #fff;
    background: rgba(255,255,255,0.04);
    border-left-color: var(--accent);
  }

  .nav-link .num {
    font-family: var(--mono);
    font-size: 10px;
    color: rgba(255,255,255,0.25);
    margin-right: 8px;
  }

  /* ‚îÄ‚îÄ Main content ‚îÄ‚îÄ */
  .main {
    margin-left: 280px;
    max-width: 860px;
    padding: 48px 56px 120px;
  }

  /* ‚îÄ‚îÄ Sections ‚îÄ‚îÄ */
  .section {
    margin-bottom: 64px;
    scroll-margin-top: 24px;
  }

  .section-number {
    font-family: var(--mono);
    font-size: 11px;
    color: var(--accent);
    letter-spacing: 1px;
    margin-bottom: 4px;
  }

  h2 {
    font-family: var(--serif);
    font-size: 28px;
    font-weight: 700;
    color: var(--ink);
    margin-bottom: 8px;
    line-height: 1.2;
  }

  .section > .lead {
    font-size: 16px;
    color: var(--ink-muted);
    line-height: 1.65;
    margin-bottom: 32px;
    max-width: 620px;
  }

  h3 {
    font-family: var(--serif);
    font-size: 19px;
    font-weight: 600;
    color: var(--ink);
    margin: 36px 0 12px;
    line-height: 1.3;
  }

  h4 {
    font-size: 14px;
    font-weight: 600;
    color: var(--ink);
    margin: 24px 0 8px;
    letter-spacing: 0.3px;
  }

  p { margin-bottom: 14px; max-width: 640px; }

  /* ‚îÄ‚îÄ Cards & Boxes ‚îÄ‚îÄ */
  .card {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px;
    margin: 20px 0;
    box-shadow: var(--shadow-sm);
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 14px;
  }

  .card-icon {
    width: 32px; height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 15px;
    flex-shrink: 0;
  }

  .card-icon.red { background: var(--accent-light); color: var(--accent); }
  .card-icon.teal { background: var(--teal-light); color: var(--teal); }
  .card-icon.gold { background: var(--gold-light); color: var(--gold); }

  .card-title {
    font-weight: 600;
    font-size: 15px;
  }

  .callout {
    background: var(--paper-warm);
    border-left: 3px solid var(--accent);
    padding: 16px 20px;
    margin: 20px 0;
    border-radius: 0 var(--radius) var(--radius) 0;
    font-size: 14px;
  }

  .callout.teal { border-left-color: var(--teal); }

  .callout strong { color: var(--ink); }

  /* ‚îÄ‚îÄ Tables ‚îÄ‚îÄ */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 16px 0 24px;
    font-size: 13.5px;
  }

  th {
    text-align: left;
    padding: 10px 14px;
    background: var(--paper-warm);
    border-bottom: 2px solid var(--border-dark);
    font-weight: 600;
    font-size: 11.5px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    color: var(--ink-muted);
  }

  td {
    padding: 10px 14px;
    border-bottom: 1px solid var(--border);
    vertical-align: top;
  }

  tr:last-child td { border-bottom: none; }

  /* ‚îÄ‚îÄ Tags & Badges ‚îÄ‚îÄ */
  .tag {
    display: inline-block;
    padding: 2px 9px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.3px;
  }

  .tag.must { background: #fde8e4; color: var(--accent-dark); }
  .tag.should { background: var(--gold-light); color: var(--gold); }
  .tag.could { background: var(--teal-light); color: var(--teal); }
  .tag.p1 { background: #fde8e4; color: var(--accent-dark); }
  .tag.p2 { background: var(--gold-light); color: #8a6508; }
  .tag.p3 { background: #e8ecf0; color: #4a5568; }

  /* ‚îÄ‚îÄ Flow diagrams ‚îÄ‚îÄ */
  .flow {
    display: flex;
    align-items: stretch;
    gap: 0;
    margin: 24px 0;
    overflow-x: auto;
    padding-bottom: 8px;
  }

  .flow-step {
    flex: 1;
    min-width: 130px;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px 14px;
    text-align: center;
    position: relative;
  }

  .flow-step .step-num {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--accent);
    margin-bottom: 4px;
  }

  .flow-step .step-title {
    font-weight: 600;
    font-size: 12.5px;
    margin-bottom: 4px;
  }

  .flow-step .step-desc {
    font-size: 11px;
    color: var(--ink-muted);
    line-height: 1.4;
  }

  .flow-arrow {
    display: flex;
    align-items: center;
    padding: 0 4px;
    color: var(--border-dark);
    font-size: 18px;
    flex-shrink: 0;
  }

  /* ‚îÄ‚îÄ Code blocks ‚îÄ‚îÄ */
  code {
    font-family: var(--mono);
    font-size: 12.5px;
    background: var(--paper-warm);
    padding: 2px 6px;
    border-radius: 3px;
    color: var(--accent-dark);
  }

  pre {
    background: var(--ink);
    color: #e0ddd5;
    padding: 20px 24px;
    border-radius: var(--radius);
    overflow-x: auto;
    margin: 16px 0 24px;
    font-family: var(--mono);
    font-size: 12.5px;
    line-height: 1.65;
  }

  pre code {
    background: none;
    padding: 0;
    color: inherit;
  }

  .comment { color: #6b8a6b; }
  .key { color: #c4a46c; }
  .string { color: #a5c4a5; }
  .type { color: #8ab4c4; }

  /* ‚îÄ‚îÄ Lists ‚îÄ‚îÄ */
  ul, ol {
    margin: 8px 0 16px 20px;
    max-width: 640px;
  }

  li {
    margin-bottom: 6px;
    padding-left: 4px;
  }

  /* ‚îÄ‚îÄ Metric grid ‚îÄ‚îÄ */
  .metric-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin: 20px 0;
  }

  .metric {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 18px;
    text-align: center;
  }

  .metric .value {
    font-family: var(--serif);
    font-size: 28px;
    font-weight: 700;
    color: var(--accent);
  }

  .metric .label {
    font-size: 11px;
    color: var(--ink-muted);
    margin-top: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* ‚îÄ‚îÄ Dividers ‚îÄ‚îÄ */
  hr {
    border: none;
    border-top: 1px solid var(--border);
    margin: 40px 0;
  }

  /* ‚îÄ‚îÄ Architecture diagram ‚îÄ‚îÄ */
  .arch-diagram {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 32px;
    margin: 24px 0;
    box-shadow: var(--shadow-sm);
  }

  .arch-layer {
    display: flex;
    gap: 12px;
    margin: 12px 0;
    align-items: stretch;
  }

  .arch-box {
    flex: 1;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 14px 16px;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    position: relative;
  }

  .arch-box.highlight {
    background: var(--accent-light);
    border-color: var(--accent);
    color: var(--accent-dark);
  }

  .arch-box.teal-bg {
    background: var(--teal-light);
    border-color: var(--teal);
    color: #1a5755;
  }

  .arch-box.gold-bg {
    background: var(--gold-light);
    border-color: var(--gold);
    color: #6b5008;
  }

  .arch-box .box-label {
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--ink-muted);
    margin-bottom: 4px;
  }

  .arch-box .box-title {
    font-weight: 600;
    font-size: 13px;
  }

  .arch-connector {
    text-align: center;
    color: var(--border-dark);
    font-size: 14px;
    padding: 4px 0;
  }

  /* ‚îÄ‚îÄ Persona cards ‚îÄ‚îÄ */
  .persona-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin: 20px 0;
  }

  .persona {
    background: #fff;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
  }

  .persona .emoji {
    font-size: 28px;
    margin-bottom: 8px;
  }

  .persona .role {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
  }

  .persona .desc {
    font-size: 12.5px;
    color: var(--ink-muted);
    line-height: 1.5;
  }

  /* ‚îÄ‚îÄ Toggle sections ‚îÄ‚îÄ */
  details {
    margin: 12px 0;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
  }

  summary {
    padding: 14px 18px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    background: #fff;
    user-select: none;
    transition: background 0.15s;
  }

  summary:hover { background: var(--paper-warm); }

  details[open] summary {
    border-bottom: 1px solid var(--border);
  }

  details > div {
    padding: 18px;
    font-size: 14px;
    background: #fff;
  }

  /* ‚îÄ‚îÄ Print ‚îÄ‚îÄ */
  @media print {
    .sidebar { display: none; }
    .main { margin-left: 0; padding: 24px; }
    .section { break-inside: avoid; }
  }

  /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    .sidebar { transform: translateX(-100%); }
    .sidebar.open { transform: translateX(0); }
    .main { margin-left: 0; padding: 24px 20px 80px; }
    .metric-grid { grid-template-columns: 1fr; }
    .persona-grid { grid-template-columns: 1fr; }
    .flow { flex-direction: column; }
    .flow-arrow { transform: rotate(90deg); justify-content: center; }
  }

  .mobile-toggle {
    display: none;
    position: fixed;
    top: 16px; left: 16px;
    z-index: 200;
    background: var(--ink);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    padding: 8px 12px;
    font-size: 14px;
    cursor: pointer;
  }

  @media (max-width: 900px) {
    .mobile-toggle { display: block; }
  }

  /* ‚îÄ‚îÄ Scope matrix ‚îÄ‚îÄ */
  .scope-row {
    display: grid;
    grid-template-columns: 2fr 1fr 3fr;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
    font-size: 13.5px;
    align-items: start;
  }

  .scope-row:last-child { border-bottom: none; }
  .scope-row.header {
    font-weight: 600;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--ink-muted);
    border-bottom: 2px solid var(--border-dark);
    padding-bottom: 8px;
  }
</style>
</head>
<body>

<button class="mobile-toggle" onclick="document.querySelector('.sidebar').classList.toggle('open')">‚ò∞ Menu</button>

<nav class="sidebar">
  <div class="sidebar-header">
    <div class="label">Product Requirements Document</div>
    <h1>MC Toetsvalidatie &amp; Generatie Platform</h1>
    <div class="version">v1.0 ‚Äî feb 2026</div>
  </div>

  <div class="nav-group">
    <div class="nav-group-title">Overzicht</div>
    <a href="#context" class="nav-link"><span class="num">01</span> Context & Probleem</a>
    <a href="#visie" class="nav-link"><span class="num">02</span> Productvisie</a>
    <a href="#gebruikers" class="nav-link"><span class="num">03</span> Gebruikers & Persona's</a>
  </div>

  <div class="nav-group">
    <div class="nav-group-title">Product</div>
    <a href="#scope" class="nav-link"><span class="num">04</span> Scope & Features</a>
    <a href="#flows" class="nav-link"><span class="num">05</span> Gebruikersflows & UX</a>
    <a href="#criteria" class="nav-link"><span class="num">06</span> Beoordelingsframework</a>
  </div>

  <div class="nav-group">
    <div class="nav-group-title">Techniek</div>
    <a href="#architectuur" class="nav-link"><span class="num">07</span> Architectuur</a>
    <a href="#datamodel" class="nav-link"><span class="num">08</span> Datamodel & API</a>
    <a href="#ai" class="nav-link"><span class="num">09</span> AI/LLM Strategie</a>
    <a href="#prompts" class="nav-link"><span class="num">10</span> Prompt-architectuur</a>
  </div>

  <div class="nav-group">
    <div class="nav-group-title">Implementatie</div>
    <a href="#export" class="nav-link"><span class="num">11</span> Export & Integraties</a>
    <a href="#roadmap" class="nav-link"><span class="num">12</span> Roadmap & Fasering</a>
    <a href="#risicos" class="nav-link"><span class="num">13</span> Risico's & Mitigatie</a>
  </div>
</nav>

<main class="main">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 01 CONTEXT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="context" class="section">
    <div class="section-number">01</div>
    <h2>Context &amp; Probleemstelling</h2>
    <p class="lead">Docenten in het hoger onderwijs besteden veel tijd aan het maken van MC-toetsvragen, maar hebben beperkte middelen om de kwaliteit systematisch te borgen. Bestaande processen zijn handmatig, inconsistent en tijdrovend.</p>

    <h3>Kernproblemen</h3>
    <div class="card">
      <div class="card-header">
        <div class="card-icon red">‚ë†</div>
        <div class="card-title">Kwaliteitsborging is ad hoc</div>
      </div>
      <p style="font-size:14px;color:var(--ink-light)">Toetsvragen worden nauwelijks systematisch beoordeeld op technische kwaliteit, betrouwbaarheid en validiteit. Fouten worden pas na afname zichtbaar in itemanalyses ‚Äî te laat om te corrigeren.</p>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon teal">‚ë°</div>
        <div class="card-title">Vraagproductie is een bottleneck</div>
      </div>
      <p style="font-size:14px;color:var(--ink-light)">Het schrijven van goede MC-vragen is een gespecialiseerde vaardigheid. Docenten hebben vaak te weinig tijd of training om voldoende kwalitatieve vragen te produceren, zeker op hogere Bloom-niveaus.</p>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon gold">‚ë¢</div>
        <div class="card-title">Geen ge√Øntegreerd instrumentarium</div>
      </div>
      <p style="font-size:14px;color:var(--ink-light)">Toetscommissies beoordelen met losse checklists en spreadsheets. Er is geen centraal systeem dat validatie, feedback en verbetersuggesties combineert met generatiemogelijkheden.</p>
    </div>

    <div class="metric-grid">
      <div class="metric">
        <div class="value">~40%</div>
        <div class="label">MC-vragen met technische fouten¬π</div>
      </div>
      <div class="metric">
        <div class="value">3-5u</div>
        <div class="label">Tijd per 20 vragen (handmatig)</div>
      </div>
      <div class="metric">
        <div class="value">80%</div>
        <div class="label">Vragen op laagste Bloom-niveau¬≤</div>
      </div>
    </div>
    <p style="font-size:11px;color:var(--ink-muted)">¬π Gebaseerd op typische literatuurschattingen (Tarrant et al., 2006) &nbsp; ¬≤ Schatting op basis van HO-toetsanalyses</p>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 02 VISIE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="visie" class="section">
    <div class="section-number">02</div>
    <h2>Productvisie</h2>
    <p class="lead">Een intern webplatform dat docenten in staat stelt MC-toetsvragen te laten beoordelen door AI op drie kwaliteitsdimensies, √©n op basis van studiemateriaal nieuwe vragen te laten genereren ‚Äî met de docent altijd in de regie.</p>

    <div class="callout">
      <strong>Kernprincipe: Human-in-the-loop.</strong> AI assisteert en adviseert; de docent besluit. Elke AI-output is een voorstel dat beoordeeld, aangepast en goedgekeurd moet worden door de vakinhoudelijk expert.
    </div>

    <h3>Twee kernfuncties</h3>
    <table>
      <tr>
        <th style="width:50%">Module A ‚Äî Validatie</th>
        <th>Module B ‚Äî Generatie</th>
      </tr>
      <tr>
        <td>
          <strong>Input:</strong> Bestaande MC-vragenset (upload of handmatige invoer)<br>
          <strong>Proces:</strong> AI beoordeelt op betrouwbaarheid, technische kwaliteit en validiteit<br>
          <strong>Output:</strong> Gedetailleerd rapport met scores, probleemanalyses en verbetervoorstellen
        </td>
        <td>
          <strong>Input:</strong> Studiemateriaal (PDF, tekst) + toetsmatrijs of leerdoelen<br>
          <strong>Proces:</strong> AI genereert MC-vragen op gewenst Bloom-niveau<br>
          <strong>Output:</strong> Vragenset met metadata, inclusief automatische kwaliteitscheck
        </td>
      </tr>
    </table>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 03 GEBRUIKERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="gebruikers" class="section">
    <div class="section-number">03</div>
    <h2>Gebruikers &amp; Persona's</h2>
    <p class="lead">Het systeem bedient drie primaire gebruikersrollen binnen √©√©n instelling.</p>

    <div class="persona-grid">
      <div class="persona">
        <div class="emoji">üë©‚Äçüè´</div>
        <div class="role">Docent / Toetsmaker</div>
        <div class="desc">Schrijft en beheert toetsvragen. Wil snel feedback op kwaliteit en hulp bij het maken van vragen op hogere Bloom-niveaus. Heeft beperkt tijd en soms beperkte toetsdidactische training.</div>
      </div>
      <div class="persona">
        <div class="emoji">üîç</div>
        <div class="role">Toetscommissielid / Reviewer</div>
        <div class="desc">Beoordeelt toetskwaliteit op opleidingsniveau. Wil een gestructureerd overzicht van kwaliteitsissues en trends, en een audittrail van verbeteringen per toets.</div>
      </div>
      <div class="persona">
        <div class="emoji">‚öôÔ∏è</div>
        <div class="role">Toetsdeskundige / Onderwijskundige</div>
        <div class="desc">Adviseert over toetsbeleid en -kwaliteit. Configureert beoordelingscriteria, beheert instellingsbrede standaarden en analyseert kwaliteitstrends over opleidingen heen.</div>
      </div>
      <div class="persona">
        <div class="emoji">üõ†Ô∏è</div>
        <div class="role">Beheerder (Technisch)</div>
        <div class="desc">Beheert gebruikersaccounts, LLM-configuratie, en systeeminstellingen. Monitort API-gebruik en kosten.</div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 04 SCOPE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="scope" class="section">
    <div class="section-number">04</div>
    <h2>Scope &amp; Feature Matrix</h2>
    <p class="lead">Overzicht van alle features, geprioriteerd met MoSCoW en ingedeeld per release.</p>

    <h3>Module A ‚Äî Validatie</h3>
    <div class="card" style="padding:16px 20px;">
      <div class="scope-row header">
        <div>Feature</div>
        <div>Prioriteit</div>
        <div>Beschrijving</div>
      </div>
      <div class="scope-row">
        <div><strong>Upload vragenset</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Upload MC-vragen via CSV/Excel/DOCX of handmatige invoer. Parsing van stam, opties en correct antwoord.</div>
      </div>
      <div class="scope-row">
        <div><strong>Deterministische analyse</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Automatische detectie van langste-antwoord-bias, homogeniteit, absolute termen, ontkenningen. Output in <code>tech_kwant_*</code> kolommen.</div>
      </div>
      <div class="scope-row">
        <div><strong>AI-beoordeling (3 dimensies)</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>LLM beoordeelt elke vraag op betrouwbaarheid, technische kwaliteit (kwalitatief) en validiteit. Scores 1-5 + toelichting.</div>
      </div>
      <div class="scope-row">
        <div><strong>Verbetervoorstellen</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Per vraag concrete suggesties voor verbetering: herformulering stam, betere afleiders, hoger Bloom-niveau.</div>
      </div>
      <div class="scope-row">
        <div><strong>Dashboard per toets</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Overzichtspagina met scores, kleurindicatoren, filtermogelijkheden en sortering op urgentie.</div>
      </div>
      <div class="scope-row">
        <div><strong>Export rapport</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Export naar CSV, PDF en Markdown met alle scores, analyses en suggesties.</div>
      </div>
      <div class="scope-row">
        <div><strong>Toetsmatrijs-koppeling</strong></div>
        <div><span class="tag should">Should</span></div>
        <div>Koppel vragen aan leerdoelen/toetsmatrijs om dekking en Bloom-verdeling te visualiseren.</div>
      </div>
      <div class="scope-row">
        <div><strong>Versiegeschiedenis</strong></div>
        <div><span class="tag should">Should</span></div>
        <div>Bijhouden van wijzigingen per vraag met diff-view en audittrail voor toetscommissie.</div>
      </div>
      <div class="scope-row">
        <div><strong>Batch-revalidatie</strong></div>
        <div><span class="tag could">Could</span></div>
        <div>Na handmatige aanpassingen: hele set opnieuw laten beoordelen met vergelijking voor/na.</div>
      </div>
    </div>

    <h3>Module B ‚Äî Generatie</h3>
    <div class="card" style="padding:16px 20px;">
      <div class="scope-row header">
        <div>Feature</div>
        <div>Prioriteit</div>
        <div>Beschrijving</div>
      </div>
      <div class="scope-row">
        <div><strong>Materiaal upload</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Upload studiemateriaal (PDF, DOCX, platte tekst). Chunking en indexering voor retrieval.</div>
      </div>
      <div class="scope-row">
        <div><strong>Vraagspecificatie</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Docent specificeert: aantal vragen, gewenst Bloom-niveau, onderwerp/leerdoel, aantal opties.</div>
      </div>
      <div class="scope-row">
        <div><strong>RAG-generatie</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Genereer MC-vragen op basis van retrieved chunks uit studiemateriaal. Geen hallucinatie door grounding.</div>
      </div>
      <div class="scope-row">
        <div><strong>Inline kwaliteitscheck</strong></div>
        <div><span class="tag must">Must</span></div>
        <div>Gegenereerde vragen doorlopen automatisch dezelfde validatiepipeline als Module A.</div>
      </div>
      <div class="scope-row">
        <div><strong>Iteratief verfijnen</strong></div>
        <div><span class="tag should">Should</span></div>
        <div>Docent kan per vraag feedback geven ("moeilijker", "ander onderwerp") en AI past aan.</div>
      </div>
      <div class="scope-row">
        <div><strong>Toetsmatrijs-gestuurd genereren</strong></div>
        <div><span class="tag should">Should</span></div>
        <div>Genereer vragen gebalanceerd over alle cellen van een toetsmatrijs (leerdoel √ó Bloom-niveau).</div>
      </div>
      <div class="scope-row">
        <div><strong>Voorbeeldvragen als stijlreferentie</strong></div>
        <div><span class="tag could">Could</span></div>
        <div>Docent levert voorbeeldvragen aan als stijl- en niveaureferentie (few-shot prompting).</div>
      </div>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 05 FLOWS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="flows" class="section">
    <div class="section-number">05</div>
    <h2>Gebruikersflows &amp; UX</h2>
    <p class="lead">De twee kernflows met stapsgewijze interactie.</p>

    <h3>Flow A ‚Äî Validatie</h3>
    <div class="flow">
      <div class="flow-step">
        <div class="step-num">A1</div>
        <div class="step-title">Upload</div>
        <div class="step-desc">CSV/Excel/DOCX of handmatige invoer van MC-vragen</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">A2</div>
        <div class="step-title">Parsing</div>
        <div class="step-desc">Herkenning stam, opties, correct antwoord. Preview & correctie</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">A3</div>
        <div class="step-title">Analyse</div>
        <div class="step-desc">Deterministische check + AI-beoordeling (3 dimensies)</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">A4</div>
        <div class="step-title">Dashboard</div>
        <div class="step-desc">Scores, kleurcodes, detail-views per vraag</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">A5</div>
        <div class="step-title">Verbeter</div>
        <div class="step-desc">Suggesties bekijken, accepteren of handmatig aanpassen</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">A6</div>
        <div class="step-title">Export</div>
        <div class="step-desc">Rapport in CSV, PDF of Markdown</div>
      </div>
    </div>

    <h3>Flow B ‚Äî Generatie</h3>
    <div class="flow">
      <div class="flow-step">
        <div class="step-num">B1</div>
        <div class="step-title">Materiaal</div>
        <div class="step-desc">Upload studiemateriaal + optioneel toetsmatrijs</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">B2</div>
        <div class="step-title">Specificeer</div>
        <div class="step-desc">Aantal, Bloom-niveau, onderwerp, # opties</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">B3</div>
        <div class="step-title">Genereer</div>
        <div class="step-desc">RAG-gestuurde vraag¬≠generatie met LLM</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">B4</div>
        <div class="step-title">Valideer</div>
        <div class="step-desc">Automatische kwaliteits¬≠check (Module A)</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">B5</div>
        <div class="step-title">Review</div>
        <div class="step-desc">Docent beoordeelt, past aan, keurt goed</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">B6</div>
        <div class="step-title">Export</div>
        <div class="step-desc">Goedgekeurde vragen exporteren</div>
      </div>
    </div>

    <h3>UX-principes</h3>
    <div class="callout teal">
      <strong>Transparantie boven magie.</strong> Toon altijd waar√≥m de AI een score geeft. Elke beoordeling bevat een korte toelichting. Bij generatie is de bron (chunk) altijd traceerbaar.
    </div>
    <ul>
      <li><strong>Progressive disclosure:</strong> Overzicht eerst (dashboard), detail on-demand (per vraag)</li>
      <li><strong>Inline editing:</strong> Vragen direct aanpassen vanuit het validatierapport, zonder context te verliezen</li>
      <li><strong>Batch + individueel:</strong> Zowel hele sets als individuele vragen verwerken</li>
      <li><strong>Non-blocking processing:</strong> Lange analyses draaien asynchroon; gebruiker krijgt notificatie bij klaar</li>
      <li><strong>Kleurcodes:</strong> üü¢ Score 4-5 &nbsp; üü° Score 3 &nbsp; üî¥ Score 1-2 ‚Äî direct zichtbaar in het overzicht</li>
    </ul>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 06 CRITERIA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="criteria" class="section">
    <div class="section-number">06</div>
    <h2>Beoordelingsframework</h2>
    <p class="lead">Elke MC-vraag wordt beoordeeld op drie dimensies. De deterministische analyse levert kwantitatieve data; het LLM voegt kwalitatieve beoordeling toe.</p>

    <div class="card">
      <div class="card-header">
        <div class="card-icon red">B</div>
        <div class="card-title">Betrouwbaarheid (Reliability)</div>
      </div>
      <p style="font-size:13.5px;color:var(--ink-light);margin-bottom:12px">Zou de student bij herhaling dezelfde score behalen?</p>
      <table>
        <tr><th>Criterium</th><th>Output</th><th>Type</th></tr>
        <tr><td>Discriminerend vermogen</td><td><code>bet_discriminatie</code></td><td>AI (kwalitatief)</td></tr>
        <tr><td>Ambigu√Øteit</td><td><code>bet_ambiguiteit</code></td><td>AI (kwalitatief)</td></tr>
        <tr><td>Gokkans-reductie</td><td>Meegewogen in score</td><td>AI (kwalitatief)</td></tr>
        <tr><td>Totaalscore</td><td><code>bet_score</code> (1-5)</td><td>AI</td></tr>
        <tr><td>Motivatie</td><td><code>bet_toelichting</code></td><td>AI (max 50 woorden)</td></tr>
      </table>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon teal">T</div>
        <div class="card-title">Technische Kwaliteit</div>
      </div>
      <p style="font-size:13.5px;color:var(--ink-light);margin-bottom:12px">Is de vraag goed geconstrueerd? Twee lagen: deterministische analyse + AI-beoordeling.</p>
      <table>
        <tr><th>Criterium</th><th>Output</th><th>Type</th></tr>
        <tr><td>Langste-antwoord-bias</td><td><code>tech_kwant_longest_bias</code></td><td>Deterministisch</td></tr>
        <tr><td>Homogeniteit opties</td><td><code>tech_kwant_homogeneity_score</code></td><td>Deterministisch</td></tr>
        <tr><td>Absolute termen</td><td><code>tech_kwant_absolute_terms_*</code></td><td>Deterministisch</td></tr>
        <tr><td>Ontkenning in stam</td><td><code>tech_kwant_negation_*</code></td><td>Deterministisch</td></tr>
        <tr><td>Plausibiliteit afleiders</td><td><code>tech_kwal_afleiders_score</code></td><td>AI (kwalitatief)</td></tr>
        <tr><td>Helderheid stam</td><td><code>tech_kwal_stam_score</code></td><td>AI (kwalitatief)</td></tr>
        <tr><td>Grammaticale hints</td><td>Meegewogen</td><td>AI (kwalitatief)</td></tr>
        <tr><td>Totaalscore</td><td><code>tech_kwal_score</code> (1-5)</td><td>AI (gewogen)</td></tr>
      </table>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon gold">V</div>
        <div class="card-title">Validiteit (Validity)</div>
      </div>
      <p style="font-size:13.5px;color:var(--ink-light);margin-bottom:12px">Meet de vraag wat je beoogt te meten?</p>
      <table>
        <tr><th>Criterium</th><th>Output</th><th>Type</th></tr>
        <tr><td>Cognitief niveau (Bloom)</td><td><code>val_cognitief_niveau</code></td><td>AI (classificatie)</td></tr>
        <tr><td>Aansluiting leerdoel</td><td>Meegewogen in score</td><td>AI (kwalitatief)</td></tr>
        <tr><td>Totaalscore</td><td><code>val_score</code> (1-5)</td><td>AI</td></tr>
        <tr><td>Motivatie</td><td><code>val_toelichting</code></td><td>AI (max 50 woorden)</td></tr>
      </table>
    </div>

    <h3>Visualisatie per vraag</h3>
    <p>Elke vraag toont een detailkaart met drie afzonderlijke dimensieblokken ‚Äî geen gewogen totaalscore, maar een helder beeld per criterium.</p>

    <div class="card" style="padding:20px 24px;">
      <div style="font-size:12px;color:var(--ink-muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:14px;font-weight:600">Voorbeeld: Vraag-detailkaart</div>
      <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;">
        <div style="border:1px solid var(--border);border-radius:var(--radius);padding:16px;border-top:3px solid var(--accent);">
          <div style="font-size:11px;color:var(--ink-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Betrouwbaarheid</div>
          <div style="font-family:var(--serif);font-size:32px;font-weight:700;color:var(--accent);">4<span style="font-size:16px;color:var(--ink-muted)">/5</span></div>
          <div style="font-size:12px;margin-top:8px;color:var(--ink-light)">
            Discriminatie: <strong>Hoog</strong><br>
            Ambigu√Øteit: <strong>Geen</strong>
          </div>
          <div style="font-size:11px;margin-top:8px;color:var(--ink-muted);line-height:1.4;border-top:1px solid var(--border);padding-top:8px">
            "Alleen studenten met kennis van X kunnen correct antwoorden. Afleiders dekken veelgemaakte fouten."
          </div>
        </div>
        <div style="border:1px solid var(--border);border-radius:var(--radius);padding:16px;border-top:3px solid var(--teal);">
          <div style="font-size:11px;color:var(--ink-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Technische Kwaliteit</div>
          <div style="font-family:var(--serif);font-size:32px;font-weight:700;color:var(--teal);">3<span style="font-size:16px;color:var(--ink-muted)">/5</span></div>
          <div style="font-size:12px;margin-top:8px;color:var(--ink-light)">
            Stam: <strong>4/5</strong> ¬∑ Afleiders: <strong>2/5</strong><br>
            ‚ö† Langste-antwoord-bias
          </div>
          <div style="font-size:11px;margin-top:8px;color:var(--ink-muted);line-height:1.4;border-top:1px solid var(--border);padding-top:8px">
            "Optie C is 2√ó langer dan de rest. Optie A is niet plausibel."
          </div>
        </div>
        <div style="border:1px solid var(--border);border-radius:var(--radius);padding:16px;border-top:3px solid var(--gold);">
          <div style="font-size:11px;color:var(--ink-muted);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:6px">Validiteit</div>
          <div style="font-family:var(--serif);font-size:32px;font-weight:700;color:var(--gold);">2<span style="font-size:16px;color:var(--ink-muted)">/5</span></div>
          <div style="font-size:12px;margin-top:8px;color:var(--ink-light)">
            Bloom: <strong>Onthouden</strong><br>
            Leerdoel vereist: Toepassen
          </div>
          <div style="font-size:11px;margin-top:8px;color:var(--ink-muted);line-height:1.4;border-top:1px solid var(--border);padding-top:8px">
            "Vraag toetst feitenreproductie; leerdoel vereist toepassing in een nieuwe context."
          </div>
        </div>
      </div>
      <div style="margin-top:16px;padding:12px 16px;background:var(--paper-warm);border-radius:var(--radius);font-size:12px;">
        <strong>Deterministisch:</strong>
        <code>longest_bias: true</code> ¬∑
        <code>homogeneity: 0.42</code> ¬∑
        <code>negation: false</code> ¬∑
        <code>absolute_terms: ["altijd" in optie D]</code>
      </div>
    </div>

    <h3>Geaggregeerd overzicht (toetsniveau)</h3>
    <p>Op toetsniveau toont het dashboard geaggregeerde visualisaties per dimensie ‚Äî geen samengestelde score, maar drie onafhankelijke lenzen op de toetskwaliteit.</p>

    <table>
      <tr><th>Visualisatie</th><th>Beschrijving</th><th>Doel</th></tr>
      <tr>
        <td><strong>Scoreverdeling per dimensie</strong></td>
        <td>Drie histogrammen (1-5) naast elkaar: betrouwbaarheid, technisch, validiteit. Kleurgecodeerd.</td>
        <td>In √©√©n oogopslag zien waar de toets sterk/zwak is per criterium</td>
      </tr>
      <tr>
        <td><strong>Heatmap vragen √ó dimensies</strong></td>
        <td>Matrix met vragen op de y-as en drie dimensies op de x-as. Cellen kleuren van groen (5) naar rood (1).</td>
        <td>Patroonherkenning: welke vragen op welke dimensie(s) problematisch zijn</td>
      </tr>
      <tr>
        <td><strong>Bloom-verdeling</strong></td>
        <td>Staafdiagram met verdeling van vragen over Bloom-niveaus, naast de gewenste verdeling (toetsmatrijs).</td>
        <td>Mismatch signaleren tussen beoogd en werkelijk cognitief niveau</td>
      </tr>
      <tr>
        <td><strong>Probleemfrequentie</strong></td>
        <td>Ranking van meest voorkomende problemen (bijv. "langste-antwoord-bias": 8√ó, "lage discriminatie": 5√ó).</td>
        <td>Gerichte verbeteractie: welk type probleem het vaakst voorkomt</td>
      </tr>
      <tr>
        <td><strong>Flagged items tabel</strong></td>
        <td>Sorteerbare tabel van vragen met minstens √©√©n score ‚â§ 2, met per dimensie de score en het kernprobleem.</td>
        <td>Werklijst voor docent: welke vragen het eerst aandacht nodig hebben</td>
      </tr>
    </table>

    <div class="callout">
      <strong>Geen gewogen totaalscore.</strong> De drie dimensies zijn bewust onafhankelijk. Een vraag kan technisch excellent zijn (5) maar op validiteit falen (1) ‚Äî dat is essenti√´le informatie die verloren gaat bij middeling. De visualisaties maken dit zichtbaar.
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 07 ARCHITECTUUR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="architectuur" class="section">
    <div class="section-number">07</div>
    <h2>Technische Architectuur</h2>
    <p class="lead">Modulaire opzet als interne webapplicatie, ontworpen voor √©√©n instelling met de mogelijkheid om later op te schalen.</p>

    <div class="arch-diagram">
      <div style="text-align:center;font-size:11px;letter-spacing:1.5px;text-transform:uppercase;color:var(--ink-muted);margin-bottom:8px;font-weight:600">Systeemarchitectuur</div>

      <div class="arch-layer">
        <div class="arch-box" style="flex:3">
          <div class="box-label">Frontend</div>
          <div class="box-title">SPA ‚Äî React / Vite</div>
          <div style="font-size:11px;color:var(--ink-muted);margin-top:4px">Dashboard, vraag-editor, upload, export</div>
        </div>
      </div>

      <div class="arch-connector">‚Üï</div>

      <div class="arch-layer">
        <div class="arch-box teal-bg">
          <div class="box-label">API Gateway</div>
          <div class="box-title">REST / tRPC</div>
        </div>
        <div class="arch-box teal-bg">
          <div class="box-label">Auth</div>
          <div class="box-title">SSO / SAML</div>
        </div>
      </div>

      <div class="arch-connector">‚Üï</div>

      <div class="arch-layer">
        <div class="arch-box highlight">
          <div class="box-label">Analyse Engine</div>
          <div class="box-title">Deterministisch</div>
          <div style="font-size:11px;color:var(--ink-muted);margin-top:4px">Regelgebaseerde checks</div>
        </div>
        <div class="arch-box highlight">
          <div class="box-label">AI Engine</div>
          <div class="box-title">LLM Orchestrator</div>
          <div style="font-size:11px;color:var(--ink-muted);margin-top:4px">Validatie + Generatie prompts</div>
        </div>
        <div class="arch-box gold-bg">
          <div class="box-label">RAG Pipeline</div>
          <div class="box-title">Retrieval</div>
          <div style="font-size:11px;color:var(--ink-muted);margin-top:4px">Chunking, embedding, search</div>
        </div>
      </div>

      <div class="arch-connector">‚Üï</div>

      <div class="arch-layer">
        <div class="arch-box teal-bg" style="flex:3;border:2px solid var(--teal);">
          <div class="box-label">Supabase Platform</div>
          <div class="box-title" style="font-size:15px;">Supabase</div>
          <div style="display:flex;gap:12px;margin-top:10px;">
            <div style="flex:1;background:rgba(255,255,255,0.5);border-radius:4px;padding:8px;font-size:11px;">
              <strong>PostgreSQL</strong><br>Vragen, scores, versies, audit
            </div>
            <div style="flex:1;background:rgba(255,255,255,0.5);border-radius:4px;padding:8px;font-size:11px;">
              <strong>pgvector</strong><br>Embeddings studiemateriaal
            </div>
            <div style="flex:1;background:rgba(255,255,255,0.5);border-radius:4px;padding:8px;font-size:11px;">
              <strong>Storage</strong><br>Uploads, exports, PDFs
            </div>
          </div>
          <div style="font-size:10px;color:#1a5755;margin-top:8px;">+ Auth ¬∑ Edge Functions ¬∑ Realtime</div>
        </div>
      </div>
    </div>

    <h3>Technologiekeuzes</h3>
    <table>
      <tr><th>Component</th><th>Technologie</th><th>Rationale</th></tr>
      <tr><td>Frontend</td><td>Vite + React + TypeScript</td><td>Statische SPA via GitHub Pages, snelle dev-server en build, Supabase-integratie via @supabase/supabase-js</td></tr>
      <tr><td>Backend API</td><td>Python (FastAPI) of Supabase Edge Functions</td><td>Python voor AI-pipeline; Edge Functions voor CRUD en lichtgewicht logica</td></tr>
      <tr><td>Database</td><td>Supabase (PostgreSQL)</td><td>Managed PostgreSQL met ingebouwde auth, realtime en Row Level Security</td></tr>
      <tr><td>Vector Store</td><td>Supabase pgvector</td><td>Vectoropslag als extensie op dezelfde Postgres-instance ‚Äî geen aparte service</td></tr>
      <tr><td>File Storage</td><td>Supabase Storage</td><td>S3-compatible objectopslag voor uploads, exports en PDFs, met RLS-policies</td></tr>
      <tr><td>Queue / Async</td><td>Supabase Edge Functions + pg_cron of externe worker</td><td>Langlopende AI-taken via achtergrondprocessen</td></tr>
      <tr><td>LLM Provider</td><td>Anthropic Claude API (primair)</td><td>Sterke instructie-opvolging, structured output, Nederlands</td></tr>
      <tr><td>Embedding</td><td>OpenAI text-embedding-3 of lokaal</td><td>Hoge kwaliteit voor Nederlandstalige tekst</td></tr>
      <tr><td>Auth</td><td>Supabase Auth + institutional SSO (SAML/OIDC)</td><td>Ingebouwde auth met ondersteuning voor externe identity providers</td></tr>
      <tr><td>Hosting</td><td>Supabase Cloud (EU-regio) of self-hosted</td><td>EU-dataresidentie mogelijk, self-hosted optie voor maximale controle</td></tr>
    </table>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 08 DATAMODEL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="datamodel" class="section">
    <div class="section-number">08</div>
    <h2>Datamodel &amp; API</h2>
    <p class="lead">Kernentiteiten en hun relaties, plus de belangrijkste API-endpoints.</p>

    <h3>Entiteiten</h3>
    <pre><code><span class="comment">// Vereenvoudigd ERD</span>

<span class="type">Exam</span> {
  <span class="key">id</span>: UUID
  <span class="key">title</span>: string
  <span class="key">course</span>: string
  <span class="key">created_by</span>: User.id
  <span class="key">learning_goals</span>: string[]     <span class="comment">// optioneel</span>
  <span class="key">created_at</span>: timestamp
}

<span class="type">Question</span> {
  <span class="key">id</span>: UUID
  <span class="key">exam_id</span>: Exam.id
  <span class="key">stem</span>: text                    <span class="comment">// de vraagstam</span>
  <span class="key">options</span>: Option[]
  <span class="key">correct_option</span>: int
  <span class="key">bloom_level</span>: enum             <span class="comment">// onthouden|begrijpen|toepassen|analyseren</span>
  <span class="key">learning_goal</span>: string?
  <span class="key">version</span>: int
  <span class="key">source</span>: enum                  <span class="comment">// manual|generated|imported</span>
}

<span class="type">Option</span> {
  <span class="key">id</span>: UUID
  <span class="key">question_id</span>: Question.id
  <span class="key">text</span>: text
  <span class="key">position</span>: int                 <span class="comment">// A, B, C, D</span>
  <span class="key">is_correct</span>: boolean
}

<span class="type">Assessment</span> {
  <span class="key">id</span>: UUID
  <span class="key">question_id</span>: Question.id
  <span class="key">version</span>: int                  <span class="comment">// koppeling aan vraagversie</span>
  <span class="comment">// Deterministisch</span>
  <span class="key">tech_kwant_longest_bias</span>: boolean
  <span class="key">tech_kwant_homogeneity_score</span>: float
  <span class="key">tech_kwant_absolute_terms_correct</span>: string[]
  <span class="key">tech_kwant_absolute_terms_distractors</span>: string[]
  <span class="key">tech_kwant_negation_detected</span>: boolean
  <span class="key">tech_kwant_negation_emphasized</span>: boolean
  <span class="key">tech_kwant_flags</span>: string[]
  <span class="comment">// AI Betrouwbaarheid</span>
  <span class="key">bet_discriminatie</span>: enum
  <span class="key">bet_ambiguiteit</span>: enum
  <span class="key">bet_score</span>: int (1-5)
  <span class="key">bet_toelichting</span>: text
  <span class="comment">// AI Technisch Kwalitatief</span>
  <span class="key">tech_kwal_stam_score</span>: int (1-5)
  <span class="key">tech_kwal_afleiders_score</span>: int (1-5)
  <span class="key">tech_kwal_score</span>: int (1-5)
  <span class="key">tech_problemen</span>: string[]
  <span class="key">tech_toelichting</span>: text
  <span class="comment">// AI Validiteit</span>
  <span class="key">val_cognitief_niveau</span>: enum
  <span class="key">val_score</span>: int (1-5)
  <span class="key">val_toelichting</span>: text
  <span class="comment">// Samengesteld</span>
  <span class="key">improvement_suggestions</span>: text[]
}

<span class="type">Material</span> {
  <span class="key">id</span>: UUID
  <span class="key">exam_id</span>: Exam.id?
  <span class="key">filename</span>: string
  <span class="key">storage_path</span>: string           <span class="comment">// Supabase Storage pad</span>
  <span class="key">content_text</span>: text           <span class="comment">// ge√´xtraheerde tekst</span>
  <span class="key">chunks</span>: Chunk[]               <span class="comment">// gesplitst + ge√´mbedded</span>
}

<span class="type">Chunk</span> {
  <span class="key">id</span>: UUID
  <span class="key">material_id</span>: Material.id
  <span class="key">text</span>: text
  <span class="key">embedding</span>: vector(1536)       <span class="comment">// Supabase pgvector</span>
  <span class="key">page</span>: int?
}</code></pre>

    <h3>API-endpoints (kern)</h3>
    <table>
      <tr><th>Methode</th><th>Endpoint</th><th>Beschrijving</th></tr>
      <tr><td><code>POST</code></td><td><code>/api/exams</code></td><td>Nieuwe toets aanmaken</td></tr>
      <tr><td><code>POST</code></td><td><code>/api/exams/{id}/upload</code></td><td>Vragenset uploaden (CSV/XLSX/DOCX)</td></tr>
      <tr><td><code>POST</code></td><td><code>/api/exams/{id}/analyze</code></td><td>Start validatie (deterministisch + AI)</td></tr>
      <tr><td><code>GET</code></td><td><code>/api/exams/{id}/results</code></td><td>Alle assessments ophalen</td></tr>
      <tr><td><code>GET</code></td><td><code>/api/questions/{id}/assessment</code></td><td>Detail-assessment per vraag</td></tr>
      <tr><td><code>PUT</code></td><td><code>/api/questions/{id}</code></td><td>Vraag bijwerken (nieuwe versie)</td></tr>
      <tr><td><code>POST</code></td><td><code>/api/materials/upload</code></td><td>Studiemateriaal uploaden + indexeren</td></tr>
      <tr><td><code>POST</code></td><td><code>/api/generate</code></td><td>MC-vragen genereren (specificatie + materiaal)</td></tr>
      <tr><td><code>GET</code></td><td><code>/api/exams/{id}/export/{format}</code></td><td>Export als csv, pdf of markdown</td></tr>
    </table>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 09 AI STRATEGIE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="ai" class="section">
    <div class="section-number">09</div>
    <h2>AI / LLM Strategie</h2>
    <p class="lead">De AI-integratie combineert deterministische regels met LLM-beoordeling en RAG-gebaseerde generatie. Elke component heeft een specifieke rol.</p>

    <h3>Twee-lagige analyse-architectuur</h3>
    <div class="callout">
      <strong>Laag 1 ‚Äî Deterministisch (snel, goedkoop, 100% reproduceerbaar):</strong> Regelgebaseerde checks die altijd identieke output geven. Langste-antwoord-bias, homogeniteit, absolute termen, ontkenningen. Draait lokaal, geen API-kosten.
    </div>
    <div class="callout teal">
      <strong>Laag 2 ‚Äî LLM (kwalitatief, genuanceerd, kostbaar):</strong> Beoordeling die menselijke interpretatie vereist: plausibiliteit van afleiders, semantische helderheid, cognitief niveau, discriminerend vermogen. Draait via API, kosten per vraag.
    </div>

    <h3>Model-selectie &amp; configuratie</h3>
    <table>
      <tr><th>Taak</th><th>Model</th><th>Rationale</th></tr>
      <tr><td>Vraagvalidatie (3 dimensies)</td><td>Claude Sonnet 4.5</td><td>Goede balans kwaliteit/kosten, sterk in structured output en Nederlandstalige instructies</td></tr>
      <tr><td>Vraaggerneratie</td><td>Claude Sonnet 4.5</td><td>Creativiteit + grounding via RAG, consistent in opvolgformat</td></tr>
      <tr><td>Embedding (studiemateriaal)</td><td>text-embedding-3-small of multilingual-e5</td><td>Kosteneffici√´nt, goed in Nederlands</td></tr>
      <tr><td>Fallback / complexe cases</td><td>Claude Opus 4.5</td><td>Voor edge-cases die diepere analyse vereisen</td></tr>
    </table>

    <h3>RAG-pipeline (Module B)</h3>
    <div class="flow">
      <div class="flow-step">
        <div class="step-num">R1</div>
        <div class="step-title">Ingest</div>
        <div class="step-desc">PDF/DOCX ‚Üí tekst extractie ‚Üí cleaning</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">R2</div>
        <div class="step-title">Chunk</div>
        <div class="step-desc">Splits op ~500 tokens, overlap 50, respect paragrafen</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">R3</div>
        <div class="step-title">Embed</div>
        <div class="step-desc">Vectorrepresentatie per chunk, opslag in Supabase pgvector</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">R4</div>
        <div class="step-title">Retrieve</div>
        <div class="step-desc">Top-k relevante chunks op basis van leerdoel/onderwerp</div>
      </div>
      <div class="flow-arrow">‚Üí</div>
      <div class="flow-step">
        <div class="step-num">R5</div>
        <div class="step-title">Generate</div>
        <div class="step-desc">LLM genereert vragen grounded in retrieved context</div>
      </div>
    </div>

    <h3>Kwaliteitsborging AI-output</h3>
    <ul>
      <li><strong>Structured output:</strong> Alle LLM-responses in JSON-schema met validatie (pydantic/zod). Geen vrije tekst parsing.</li>
      <li><strong>Temperature-strategie:</strong> Validatie op temp 0.0 (reproduceerbaar); generatie op temp 0.4-0.7 (creatief maar gecontroleerd).</li>
      <li><strong>Retry-logica:</strong> Bij schema-validatiefouten maximaal 2 retries met error-feedback in prompt.</li>
      <li><strong>Grounding-check:</strong> Gegenereerde vragen worden geverifieerd tegen bronchunks; vragen zonder duidelijke bron worden geflagd.</li>
      <li><strong>Consistentie-monitor:</strong> Periodiek dezelfde vragen opnieuw valideren om LLM-drift te detecteren.</li>
    </ul>

    <h3>Kostenmodel</h3>
    <table>
      <tr><th>Operatie</th><th>Geschatte tokens</th><th>Kosten (indicatief)</th></tr>
      <tr><td>Validatie per vraag (3 dimensies)</td><td>~2.500 in + ~800 out</td><td>~‚Ç¨0,01‚Äì0,02</td></tr>
      <tr><td>Generatie per vraag (incl. RAG)</td><td>~3.000 in + ~500 out</td><td>~‚Ç¨0,01‚Äì0,03</td></tr>
      <tr><td>Embedding per chunk</td><td>~500 tokens</td><td>~‚Ç¨0,0001</td></tr>
      <tr><td>Typische toets (40 vragen validatie)</td><td>‚Äî</td><td>~‚Ç¨0,50‚Äì1,00</td></tr>
    </table>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 10 PROMPTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="prompts" class="section">
    <div class="section-number">10</div>
    <h2>Prompt-architectuur</h2>
    <p class="lead">De prompts zijn gestructureerd in lagen: systeem-instructie, beoordelingscriteria, vraagspecifieke context en output-schema.</p>

    <h3>Prompt-structuur: Validatie</h3>
    <pre><code><span class="comment">// Laag 1: System prompt (vast per model-configuratie)</span>
<span class="string">"Je bent een expert in toetsdidactiek en MC-vraaganalyse
voor het Nederlandse hoger onderwijs. Je beoordeelt
MC-vragen op drie dimensies: betrouwbaarheid, technische
kwaliteit en validiteit."</span>

<span class="comment">// Laag 2: Criteria (uit criteria-*.md bestanden)</span>
<span class="key">&lt;criteria_betrouwbaarheid&gt;</span>
  {inhoud van criteria-betrouwbaarheid.md}
<span class="key">&lt;/criteria_betrouwbaarheid&gt;</span>
<span class="key">&lt;criteria_technisch&gt;</span>
  {inhoud van criteria-technisch.md}
<span class="key">&lt;/criteria_technisch&gt;</span>
<span class="key">&lt;criteria_validiteit&gt;</span>
  {inhoud van criteria-validiteit.md}
<span class="key">&lt;/criteria_validiteit&gt;</span>

<span class="comment">// Laag 3: Kwantitatieve vooranalyse (van deterministic analyzer)</span>
<span class="key">&lt;deterministic_results&gt;</span>
  {tech_kwant_* data als JSON}
<span class="key">&lt;/deterministic_results&gt;</span>

<span class="comment">// Laag 4: De te beoordelen vraag</span>
<span class="key">&lt;question&gt;</span>
  <span class="key">stam</span>: "Welke van de volgende..."
  <span class="key">opties</span>: [A: "...", B: "...", C: "...", D: "..."]
  <span class="key">correct</span>: "B"
  <span class="key">leerdoel</span>: "Student kan X toepassen op Y"
<span class="key">&lt;/question&gt;</span>

<span class="comment">// Laag 5: Output-schema (JSON)</span>
<span class="key">&lt;output_schema&gt;</span>
  {JSON schema met alle verwachte velden}
<span class="key">&lt;/output_schema&gt;</span></code></pre>

    <h3>Prompt-structuur: Generatie</h3>
    <pre><code><span class="comment">// System prompt</span>
<span class="string">"Je bent een expert MC-vraagontwerper voor het
Nederlandse hoger onderwijs."</span>

<span class="comment">// Specificatie</span>
<span class="key">&lt;specification&gt;</span>
  <span class="key">aantal</span>: 5
  <span class="key">bloom_niveau</span>: "toepassen"
  <span class="key">leerdoel</span>: "Student kan..."
  <span class="key">aantal_opties</span>: 4
  <span class="key">taal</span>: "Nederlands"
<span class="key">&lt;/specification&gt;</span>

<span class="comment">// Bronmateriaal (RAG-retrieved chunks)</span>
<span class="key">&lt;source_material&gt;</span>
  <span class="key">&lt;chunk id="c1" page="23"&gt;</span>
    {relevante tekst uit studiemateriaal}
  <span class="key">&lt;/chunk&gt;</span>
  <span class="key">&lt;chunk id="c2" page="45"&gt;</span>
    {relevante tekst uit studiemateriaal}
  <span class="key">&lt;/chunk&gt;</span>
<span class="key">&lt;/source_material&gt;</span>

<span class="comment">// Kwaliteitsinstructies</span>
<span class="key">&lt;quality_rules&gt;</span>
  - Elk antwoord moet grounded zijn in het bronmateriaal
  - Afleiders moeten plausibel zijn (veelgemaakte fouten)
  - Stam moet zelfstandig leesbaar zijn
  - Vermijd "alle bovenstaande" / "geen van bovenstaande"
  - Geef per vraag aan welke chunk(s) als bron dienden
<span class="key">&lt;/quality_rules&gt;</span>

<span class="comment">// Output-schema</span>
<span class="key">&lt;output_schema&gt;</span>
  {JSON schema: array van gegenereerde vragen + metadata}
<span class="key">&lt;/output_schema&gt;</span></code></pre>

    <h3>Prompt-beheer</h3>
    <ul>
      <li><strong>Versioning:</strong> Alle prompts opgeslagen met versienummer en timestamp. Wijzigingen zijn traceerbaar.</li>
      <li><strong>A/B-testing:</strong> Mogelijkheid om twee promptversies parallel te draaien en output te vergelijken.</li>
      <li><strong>Few-shot voorbeelden:</strong> Per beoordelingsdimensie 2-3 voorbeeldbeoordelingen als referentie in de prompt. Voorbeelden bevatten zowel goede als slechte vragen.</li>
      <li><strong>Criteria als configuratie:</strong> De criteria-bestanden (.md) zijn de single source of truth. Wijzigingen in criteria propageren automatisch naar prompts.</li>
    </ul>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 11 EXPORT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="export" class="section">
    <div class="section-number">11</div>
    <h2>Export &amp; Integraties</h2>
    <p class="lead">Het systeem levert output in drie formaten en kan aansluiten op bestaande toetssystemen.</p>

    <h3>Exportformaten</h3>
    <table>
      <tr><th>Formaat</th><th>Inhoud</th><th>Use case</th></tr>
      <tr>
        <td><strong>CSV</strong></td>
        <td>Platte tabel met alle vragen, scores en metadata. E√©n rij per vraag.</td>
        <td>Data-analyse, import in Excel/SPSS, koppeling met itemanalyse na afname</td>
      </tr>
      <tr>
        <td><strong>PDF</strong></td>
        <td>Geformateerd rapport met samenvatting, per-vraag analyse, kleurcodes en grafieken</td>
        <td>Toetscommissie-rapportage, archivering, vergaderingen</td>
      </tr>
      <tr>
        <td><strong>Markdown</strong></td>
        <td>Gestructureerd tekstbestand, ideaal voor versiebeheer en documentatie</td>
        <td>Git-opslag, wiki-publicatie, verdere verwerking</td>
      </tr>
    </table>

    <h3>Toekomstige integraties (Could)</h3>
    <ul>
      <li><strong>QTI-export:</strong> IMS Question & Test Interoperability-standaard voor import in LMS'en (Canvas, Brightspace, Moodle)</li>
      <li><strong>LMS-plugin:</strong> Directe koppeling met het institutionele LMS voor import/export van vragenbanken</li>
      <li><strong>Webhook/API:</strong> Koppeling met externe toetssystemen of itembanken</li>
    </ul>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 12 ROADMAP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="roadmap" class="section">
    <div class="section-number">12</div>
    <h2>Roadmap &amp; Fasering</h2>
    <p class="lead">Incrementele uitrol in drie fasen, met snelle waarde in fase 1.</p>

    <div class="card">
      <div class="card-header">
        <div class="card-icon red">Œ±</div>
        <div class="card-title">Fase 1 ‚Äî MVP Validatie (8-10 weken)</div>
      </div>
      <table>
        <tr><th>Sprint</th><th>Deliverable</th></tr>
        <tr><td>1-2</td><td>Projectsetup, datamodel, upload-parsing (CSV/Excel), deterministisch analyzer</td></tr>
        <tr><td>3-4</td><td>AI-validatie pipeline (3 dimensies), structured output, prompt-templates</td></tr>
        <tr><td>5-6</td><td>Dashboard frontend, detail-view per vraag, kleurcodes, filteren/sorteren</td></tr>
        <tr><td>7-8</td><td>Export (CSV, PDF, Markdown), SSO-integratie, bugfixes</td></tr>
        <tr><td>9-10</td><td>Pilot met 3-5 docenten, iteratie op feedback, productie-deploy</td></tr>
      </table>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon teal">Œ≤</div>
        <div class="card-title">Fase 2 ‚Äî Generatie + Verfijning (6-8 weken)</div>
      </div>
      <table>
        <tr><th>Sprint</th><th>Deliverable</th></tr>
        <tr><td>11-12</td><td>RAG-pipeline: materiaal-upload, chunking, embedding, vector store</td></tr>
        <tr><td>13-14</td><td>Generatie-engine: vraagproductie met specificaties, inline validatie</td></tr>
        <tr><td>15-16</td><td>Iteratief verfijnen UI, toetsmatrijs-koppeling, versiegeschiedenis</td></tr>
        <tr><td>17-18</td><td>Uitgebreide pilot, prompt-tuning, performance-optimalisatie</td></tr>
      </table>
    </div>

    <div class="card">
      <div class="card-header">
        <div class="card-icon gold">Œ≥</div>
        <div class="card-title">Fase 3 ‚Äî Uitbreiding (doorlopend)</div>
      </div>
      <ul style="font-size:14px;padding:8px 0 0 20px">
        <li>QTI-export en LMS-integratie</li>
        <li>Toetsmatrijs-gestuurd genereren</li>
        <li>Batch-revalidatie met voor/na vergelijking</li>
        <li>Instellingsbrede dashboards en trendanalyses</li>
        <li>Few-shot stijlreferentie bij generatie</li>
      </ul>
    </div>
  </section>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 13 RISICO'S ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <section id="risicos" class="section">
    <div class="section-number">13</div>
    <h2>Risico's &amp; Mitigatie</h2>
    <p class="lead">Bekende risico's met concrete mitigatiestrategie√´n.</p>

    <table>
      <tr><th>Risico</th><th>Impact</th><th>Kans</th><th>Mitigatie</th></tr>
      <tr>
        <td><strong>LLM-inconsistentie</strong><br><span style="font-size:12px;color:var(--ink-muted)">Dezelfde vraag krijgt bij herhaling verschillende scores</span></td>
        <td><span class="tag p1">Hoog</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td>Temperature 0.0 voor validatie, consistentie-monitoring, deterministisch als baseline, meervoudige evaluaties met meerderheidstem</td>
      </tr>
      <tr>
        <td><strong>Hallucinatie bij generatie</strong><br><span style="font-size:12px;color:var(--ink-muted)">AI genereert feitelijk onjuiste vragen of antwoorden</span></td>
        <td><span class="tag p1">Hoog</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td>RAG-grounding, brontracering per vraag, menselijke review als verplichte stap, flag bij lage retrieval-confidence</td>
      </tr>
      <tr>
        <td><strong>AVG / dataprivacy</strong><br><span style="font-size:12px;color:var(--ink-muted)">Toetsmateriaal bevat persoonsgegevens of gaat naar externe API</span></td>
        <td><span class="tag p1">Hoog</span></td>
        <td><span class="tag p3">Laag</span></td>
        <td>DPIA uitvoeren, verwerkersovereenkomst met LLM-provider, EU-dataresidentie, optie voor on-premise LLM</td>
      </tr>
      <tr>
        <td><strong>Adoptie door docenten</strong><br><span style="font-size:12px;color:var(--ink-muted)">Docenten vertrouwen AI-oordeel niet of vinden tool te complex</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td>Transparante uitleg per score, human-in-the-loop principe, pilotfase met early adopters, training en support</td>
      </tr>
      <tr>
        <td><strong>Over-reliance op AI</strong><br><span style="font-size:12px;color:var(--ink-muted)">Docenten accepteren AI-suggesties klakkeloos</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td>Verplichte review-stap, disclaimers, geen "auto-fix" functionaliteit, educatie over tool als hulpmiddel</td>
      </tr>
      <tr>
        <td><strong>Kosten bij opschaling</strong><br><span style="font-size:12px;color:var(--ink-muted)">API-kosten lopen op bij grootschalig gebruik</span></td>
        <td><span class="tag p3">Laag</span></td>
        <td><span class="tag p2">Gemiddeld</span></td>
        <td>Kostenmonitoring per opleiding, caching van assessments, kleiner model voor eenvoudige checks, budgetlimieten</td>
      </tr>
    </table>

    <hr>

    <div style="text-align:center;padding:32px 0 0;">
      <p style="font-size:13px;color:var(--ink-muted);max-width:none">
        <strong>PRD v1.0</strong> ‚Äî MC Toetsvalidatie &amp; Generatie Platform<br>
        Opgesteld februari 2026 &nbsp;¬∑&nbsp; Intern gebruik
      </p>
    </div>
  </section>

</main>

<script>
  // Active nav highlighting
  const sections = document.querySelectorAll('.section');
  const navLinks = document.querySelectorAll('.nav-link');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        navLinks.forEach(link => link.classList.remove('active'));
        const activeLink = document.querySelector(`.nav-link[href="#${entry.target.id}"]`);
        if (activeLink) activeLink.classList.add('active');
      }
    });
  }, { rootMargin: '-20% 0px -70% 0px' });

  sections.forEach(section => observer.observe(section));

  // Close mobile nav on link click
  navLinks.forEach(link => {
    link.addEventListener('click', () => {
      document.querySelector('.sidebar').classList.remove('open');
    });
  });
</script>

</body>
</html>